@using Project_LTW.Models
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewBag.Title - Fashion Store</title>

    <link href="@Url.Content("~/assets/favicon/favicon(base).ico")" rel="icon" type="image/x-icon" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" />

    <style>
       
           /* ==========================================================================
        1. GLOBAL & LAYOUT (Gộp từ default.css và error.css)
        ========================================================================== */
           body {
               /* Font từ error.css cho đẹp hơn */
               font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
               /* Background và Flex layout từ default.css */
               background-color: rgba(249, 242, 235, 0.646);
               color: #212529;
               display: flex;
               flex-direction: column;
               min-height: 100vh; /* Đổi height: 100% thành min-height: 100vh để footer luôn ở dưới cùng */
               justify-content: space-between;
               margin: 0;
               padding: 0;
               padding-top: 80px;
           }

           ul {
               list-style-type: none;
           }

           /* ==========================================================================
        2. NAVIGATION BAR (Từ default.css)
        ========================================================================== */
           nav {
               box-shadow: 5px 5px 10px rgba(2, 2, 2, 0.114);
               margin-bottom: 10px;
           }

           #logo {
               height: 180px;
           }

           .navbar-brand {
               margin-right: 40px;
           }

           .nav-item {
               margin-left: 5px;
               margin-right: 20px;
           }

           [class*="icon"] {
               text-align: center;
               margin-top: 15px;
               margin-bottom: -5px;
           }

           .nav-item > a > p {
               text-align: center;
               margin-top: 1px;
           }

           #user {
               padding-top: 15px;
           }

           #usertext {
               margin-top: -4px;
           }

           #user:hover #dropdown-menu {
               display: block;
           }

           #github {
               margin-top: -4px;
           }

               #github:active .icon {
                   color: #09fa2d;
                   transition: color 0.2s ease;
               }

           .icon {
               color: #00000075;
               transition: transform 0.2s ease, color 0.2s ease;
           }

           .nav-item:hover .icon,
           .nav-link:hover .icon {
               color: #0d6efd;
               transform: scale(1.1, 1.1);
           }

           #bar > li:hover > a > .icon,
           #bar > li:hover > a > p {
               transform: 
                   0.1s scale(1.1, 1.1);
               font-weight: 500;
           }

           .source-git {
               margin-left: -80px;
               margin-right: 20px;
           }

           /* --- Search Box --- */
           .search-container {
               max-width: 320px;
               margin: 2rem auto;
               margin-right: 10px;
               box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.22);
               border-radius: 12px;
               overflow: hidden;
               background-color: #fff;
           }

               .search-container .form-control {
                   border: none;
                   box-shadow: none;
                   font-size: 1rem;
                   padding: 0.75rem 1rem;
               }

               .search-container .btn-search {
                   border: none;
                   padding: 0.75rem;
                   border-radius: 8px;
                   margin-right: 0rem;
                   border: 2px solid transparent;
                   transition: all 0.5s;
               }

                   .search-container .btn-search:hover {
                       background-color: #ececec;
                   }

           .form-control:focus {
               border: 2px solid transparent;
               width: 15em;
               height: 2.5em;
               padding-left: 0.8em;
               outline: none;
               overflow: hidden;
               background-color: #F3F3F3;
               border-radius: 10px;
               transition: all 0.75s;
           }

           /* ==========================================================================
        3. BANNER (Từ banner.css)
        ========================================================================== */
           #carouselExampleInterval {
               margin-bottom: 10px;
               box-shadow: 5px 5px 10px rgba(2, 2, 2, 0.371);
           }

           /* ==========================================================================
        4. COMPONENTS: TOPS & PRODUCTS (Từ tops.css)
        ========================================================================== */
           #content-top {
               padding: 0px;
               margin-bottom: 10px;
               height: fit-content;
           }

           #main-top {
               border-radius: 15px;
               padding: 0px;
               margin-bottom: 10px;
               position: relative;
               overflow: hidden;
           }

               #main-top img {
                   margin: 0px;
                   width: 100%;
                   height: 100%;
                   display: block;
               }

           .overlay {
               position: absolute;
               bottom: 0;
               left: 0;
               right: 0;
               height: 70%;
               background: linear-gradient(to top, rgb(0, 0, 0), transparent);
           }

           .wrapper {
               padding: 10px;
               display: flex;
               align-items: center;
               justify-content: space-between;
               position: absolute;
               width: 100%;
               bottom: 10px;
               padding-left: 10%;
               padding-right: 8%;
               color: white;
               font-size: 18px;
               z-index: 2;
           }

               .wrapper p {
                   padding-top: 5%;
               }

               .wrapper button {
                   width: 30%;
                   font-size: 20px;
                   border-radius: 12px;
               }

           .item-top {
               border-radius: 30px;
           }

           /* --- 3D Cart Button Animation --- */
           .cart-button {
               background: linear-gradient(135deg, #424449, #1565c0);
               color: white;
               padding: 12px 24px;
               border: none;
               border-radius: 25px;
               cursor: pointer;
               font-size: 16px;
               font-family: "Poppins", sans-serif;
               transition: all 0.3s ease, color 0.2s ease, transform 0.2s ease;
               box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
               position: relative;
               overflow: hidden;
               margin-bottom: 3px;
               transform-style: preserve-3d;
               perspective: 1000px;
               transform: translateZ(0);
               border: 1px solid rgba(255, 255, 255, 0.1);
               animation: subtle-pulse 2s infinite cubic-bezier(0.4, 0, 0.6, 1);
           }

               .cart-button::before {
                   content: "";
                   position: absolute;
                   top: 0;
                   left: -100%;
                   width: 100%;
                   height: 100%;
                   background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                   transition: 0.5s;
               }

               .cart-button:hover::before {
                   left: 100%;
               }

               .cart-button:hover {
                   transform: translateZ(10px) scale(1.02);
                   background: linear-gradient(135deg, #3d7fff, #1976d2);
                   box-shadow: 0 8px 25px rgba(41, 98, 255, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.15) inset, 0 0 20px rgba(41, 98, 255, 0.2), 0 0 0 4px rgba(41, 98, 255, 0.1);
                   letter-spacing: 1px;
               }

           .cart-icon {
               transform: translateZ(5px);
           }

           @@keyframes subtle-pulse {
               0% {
                   box-shadow: 0 0 0 0 rgba(41, 98, 255, 0.4);
               }

               70% {
                   box-shadow: 0 0 0 10px rgba(41, 98, 255, 0);
               }

               100% {
                   box-shadow: 0 0 0 0 rgba(41, 98, 255, 0);
               }
           }

           /* ==========================================================================
        5. COMPONENT: NEWSLETTER (Từ contact.css)
        ========================================================================== */
           .newsletter-box {
               background-color: #7c7d7e13;
               padding: 40px;
               border-radius: 8px;
               text-align: center;
               max-width: 500px;
               margin: 50px auto;
               box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
           }

               .newsletter-box h2 {
                   font-weight: bold;
               }

               .newsletter-box p {
                   color: #555;
               }

           /* ==========================================================================
        6. COMPONENT: TOAST NOTIFICATION (Từ toast.css)
        ========================================================================== */
           .toast-container {
               border-radius: 5%;
               padding: 0px;
               width: 250px;
               height: 110px;
               left: 45%;
               top: 30%;
           }

           #add-success {
               justify-content: center;
               flex-direction: column;
               align-items: center;
               padding: 0px;
               font-size: large;
               width: 100%;
               height: 100%;
               text-align: center;
               background-color: rgb(39, 38, 38);
               color: aliceblue;
               opacity: 0.9;
           }

               #add-success i {
                   font-size: xx-large;
               }

           /* ==========================================================================
        7. COMPONENT: SEE MORE LINK (Từ moreContent.css)
        ========================================================================== */
           .more {
               text-decoration: none;
               color: black;
               font-size: large;
               margin-bottom: 10px;
           }

               .more:hover {
                   color: blue;
                   font-weight: 500;
               }

                   .more:hover #next-arrow {
                       transform: translate(3px, 0px);
                       transition: transform 0.3s ease;
                   }

           /* ==========================================================================
        8. PAGE: 404 ERROR (Từ error.css)
        ========================================================================== */
           .header-404 {
               padding: 2rem 1rem 1rem;
               border-bottom: 1px solid #dee2e6;
           }

               .header-404 h1 {
                   font-size: 4rem;
                   font-weight: 700;
                   margin: 0;
                   letter-spacing: -1px;
               }

               .header-404 p {
                   font-size: 1.25rem;
                   margin-top: 0.5rem;
                   color: #495057;
               }

           .content-404 {
               max-width: 480px;
               margin: 2rem auto;
               text-align: center;
               padding: 1rem;
           }

               .content-404 .btn-home {
                   border-radius: .5rem;
                   padding: .5rem 1.5rem;
               }

           /* ==========================================================================
        9. FOOTER & BACK TO TOP (Từ default.css)
        ========================================================================== */
           /* --- Back To Top Button --- */
           @@keyframes highlight {
               10% {
                   transform: scale(1.1, 1.1);
               }

               20% {
                   transform: scale(1.15, 1.15);
               }

               30% {
                   transform: scale(1.2, 1.2);
               }

               40% {
                   transform: scale(1.25, 1.25);
               }

               50% {
                   transform: scale(1.3, 1.3);
               }

               60% {
                   transform: scale(1.25, 1.25);
               }

               70% {
                   transform: scale(1.2, 1.2);
               }

               80% {
                   transform: scale(1.15, 1.15);
               }

               90% {
                   transform: scale(1.1, 1.1);
               }

               95% {
                   transform: scale(1.05, 1.05);
               }

               100% {
                   transform: scale(1, 1);
               }
           }

           #backToTop {
               position: fixed;
               bottom: 40px;
               right: 30px;
               display: none; /* JS sẽ xử lý hiển thị */
               z-index: 1000;
               width: 45px;
               height: 45px;
               font-size: 2.5rem;
               border: none;
               align-items: center;
               color: black;
               padding: 0px;
               background-color: rgb(254, 244, 231);
               justify-content: center;
               opacity: 0.4;
               transition: opacity 2s ease;
               animation: highlight 2s infinite;
           }

           /* --- Footer --- */
           .info {
               margin-top: 30px;
               margin-left: 30px;
               margin-bottom: 30px;
           }

           .coppyright {
               text-align: center;
               opacity: 0.5;
               border-top: solid 1px black;
           }

           #footer {
               border-top: solid 1px black;
               margin: 0px;
           }
  
        #backToTop {
            position: fixed;
            bottom: 40px;
            right: 30px;
            display: none;
            z-index: 1000;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-white fixed-top shadow-sm" style="max-height: 100px;">
        <div class="container-xxl">
            <a class="navbar-brand" href="@Url.Action("Index", "Home")">
                <img src="@Url.Content("~/assets/homePage/logo.png")" class="img-fluid" alt="Logo" style="height: 60px;" />
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0" id="bar">
                    <li class="nav-item">
                        <a class="nav-link active d-flex flex-column justify-content-center align-content-center" href="@Url.Action("Index", "Home")">
                            <i class="bi bi-house-door fs-4 icon"></i>
                            <p>HOME</p>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link active d-flex flex-column justify-content-center align-content-center" href="@Url.Action("Product", "Home")">
                            <i class="bi bi-basket fs-4 icon"></i>
                            <p>ALL PRODUCTS</p>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link active d-flex flex-column justify-content-center align-content-center" href="@Url.Action("Index", "Cart")">
                            <i class="bi bi-cart3 fs-4 icon"></i>
                            <p>CART</p>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link active d-flex flex-column justify-content-center align-content-center" href="https://www.paypal.com/signin?locale.x=vi_VN">
                            <i class="bi bi-wallet2 fs-4 icon"></i>
                            <p>WALLET</p>
                        </a>
                    </li>

                    @{
                        var user = Session["User"] as CUSTOMER;
                    }

                    <li class="nav-item dropdown text-center" id="user">
                        <a class="nav-link" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-person-circle icon fs-4" id="userIcon" style="color: #0d6efd;"></i>

                            @if (user != null)
                            {
                                <p id="usertext" style="font-weight: bold; color: #0d6efd;">@user.HOTEN</p>
                            }
                            else
                            {
                                <p id="usertext">USER</p>
                            }
                        </a>

                        <ul class="dropdown-menu" style="margin-top: -11px" id="dropdown-menu">
                            @if (user != null)
                            {

                                /* --- ĐÃ ĐĂNG NHẬP --- */
                                <li><a class="dropdown-item" href="@Url.Action("Profile", "User")">Thông tin tài khoản</a></li>
                                <li><a class="dropdown-item" href="@Url.Action("OrderHistory", "User")">Đơn hàng của tôi</a></li>
                                <li><a class="dropdown-item" href="@Url.Action("Wishlist", "User")">Danh sách yêu thích</a></li>

                                <li><hr class="dropdown-divider"></li>
                                <li>
                                    <a class="dropdown-item text-danger" href="@Url.Action("Logout", "User")">
                                        <i class="bi bi-box-arrow-right"></i> Đăng xuất
                                    </a>
                                </li>
                            }
                            else
                            {
                                /* --- CHƯA ĐĂNG NHẬP --- */
                                <li>
                                    <a class="dropdown-item" href="@Url.Action("Login", "User")">
                                        <i class="bi bi-box-arrow-in-right"></i> Đăng nhập
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="@Url.Action("Register", "User")">
                                        <i class="bi bi-person-plus"></i> Đăng ký
                                    </a>
                                </li>
                            }
                        </ul>
                    </li>
                    <li class="nav-item" title="Source Code" id="github">
                        <a class="nav-link active d-flex flex-column justify-content-center align-content-center" href="#">
                            <i class="bi bi-github fs-1 icon"></i>
                        </a>
                    </li>
                </ul>

                <div class="search-container d-flex align-items-center" id="search-container">
                    <form action="@Url.Action("TimKiemTheoTuKhoa", "Home")" method="get" class="d-flex w-100">
                        <input type="text" name="keyword" class="form-control" placeholder="Search" />
                        <button type="submit" class="btn btn-search">
                            <i class="bi bi-search"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </nav>

    <button id="backToTop" class="btn btn-dark rounded-circle">
        <i class="bi bi-arrow-up"></i>
    </button>

    <div class="container mt-5 pt-4 flex-grow-1">
        <div class="row">
            <aside class="col-md-3 col-lg-2 mb-4">
                @Html.Action("_Category", "Home")
            </aside>

            <main class="col-md-9 col-lg-10">
                @if (TempData["Success"] != null)
                {
                    <div class="alert alert-success alert-dismissible fade show">
                        @TempData["Success"]
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                }

                @RenderBody()

            </main>
        </div>
    </div>

    <footer class="bg-white border-top mt-auto py-4" id="footer">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="info">
                        <h5>Liên hệ</h5>
                        <ul class="list-unstyled">
                            <li><i class="bi bi-telephone"></i> 083 855 7433</li>
                            <li><i class="bi bi-building"></i> HUIT - TP.HCM</li>
                            <li><i class="bi bi-facebook"></i> <a href="https://www.facebook.com/DhCongThuongHCM/">Fanpage HUIT</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-6 text-end">
                    <img src="@Url.Content("~/assets/homePage/logo-fix.png")" alt="Logo" style="max-width: 300px; margin-top: 30px" />
                </div>
            </div>
        </div>
        <div class="coppyright">
            <span>© 2025 Fashion Web - Design by You</span>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    @RenderSection("Scripts", required: false)
    <script>
        $(document).ready(function () {
            $(window).scroll(function () {
                if ($(this).scrollTop() > 100) $('#backToTop').fadeIn();
                else $('#backToTop').fadeOut();
            });
            $('#backToTop').click(function () {
                $('html, body').animate({ scrollTop: 0 }, 600);
                return false;
            });
        });
    </script>
</body>
</html>